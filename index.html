<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GX TRANSLATE PRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Hind+Siliguri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Hind Siliguri', sans-serif;
            background: #050507;
            color: #f1f5f9;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }
        .main-card {
            background: #111114;
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 28px;
            width: 100%;
            max-width: 550px;
        }
        .mode-btn.active {
            background: #4f46e5;
            color: white;
            box-shadow: 0 0 20px rgba(79, 70, 229, 0.3);
        }
        .scroll-box {
            height: 150px;
            overflow-y: auto;
            scrollbar-width: none;
        }
        .scroll-box::-webkit-scrollbar { display: none; }
        .input-style {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: 0.3s;
        }
        #langCategory { display: none; } /* শুরুতে হাইড থাকবে */
    </style>
</head>
<body>

    <div class="main-card p-6 md:p-8 shadow-2xl">
        
        <div class="flex gap-1 mb-6 p-1 bg-black/40 rounded-2xl border border-white/5">
            <button id="btnPhonetic" onclick="setMode('phonetic')" class="mode-btn active w-full py-2.5 rounded-xl text-[9px] font-bold uppercase tracking-widest transition-all">Phonetic</button>
            <button id="btnTranslate" onclick="setMode('translate')" class="mode-btn w-full py-2.5 rounded-xl text-[9px] font-bold uppercase tracking-widest transition-all">Translate</button>
            <button id="btnDictionary" onclick="setMode('dictionary')" class="mode-btn w-full py-2.5 rounded-xl text-[9px] font-bold uppercase tracking-widest transition-all">Dictionary</button>
        </div>

        <header class="flex justify-between items-center mb-6 h-10">
            <h1 class="text-2xl font-black bg-gradient-to-r from-blue-400 to-indigo-500 bg-clip-text text-transparent uppercase tracking-tighter">GX PRO</h1>
            
            <select id="langCategory" onchange="process()" class="bg-indigo-900/30 text-[10px] font-bold px-3 py-1.5 rounded-xl outline-none border border-indigo-500/40 text-indigo-300">
                <option value="en-bn">ENGLISH ➔ BANGLA</option>
                <option value="bn-en">BANGLA ➔ ENGLISH</option>
            </select>
        </header>

        <div class="mb-6 relative">
            <div id="statusLabel" class="text-[9px] font-bold text-indigo-400 uppercase tracking-widest mb-2 ml-2">Phonetic Output</div>
            <div class="input-style rounded-2xl relative shadow-inner">
                <div id="outputBox" class="scroll-box p-5 text-xl font-semibold leading-relaxed break-words text-slate-100 pr-16">...</div>
                <button onclick="copyResult()" class="absolute bottom-4 right-4 bg-indigo-600 hover:bg-indigo-500 text-white text-[9px] font-bold px-3 py-2 rounded-xl transition-all active:scale-90 shadow-lg">COPY</button>
            </div>
        </div>

        <div class="relative">
            <div id="inputLabel" class="text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-2">Enter Text</div>
            <div class="input-style rounded-2xl overflow-hidden">
                <textarea id="userInput" oninput="process()" placeholder="এখানে লিখুন..." 
                    class="w-full h-[150px] bg-transparent p-5 text-lg outline-none resize-none text-slate-300 placeholder:text-slate-700"></textarea>
            </div>
        </div>

        <footer class="mt-8 flex justify-between items-center text-[8px] text-slate-600 font-bold uppercase tracking-[0.3em]">
            <span>Hybrid API Engine</span>
            <span>&copy; 2026 GX STUDIO</span>
        </footer>
    </div>

    <script>
        let currentMode = 'phonetic';
        const bnToEnMap = {'অ':'o','আ':'a','ই':'i','ঈ':'ee','উ':'u','ঊ':'u','এ':'e','ঐ':'oi','ও':'o','ঔ':'ou','ক':'k','খ':'kh','গ':'g','ঘ':'gh','ঙ':'ng','চ':'ch','ছ':'chh','জ':'j','ঝ':'jh','ঞ':'nyo','ট':'t','ঠ':'th','ড':'d','ঢ':'dh','ণ':'n','ত':'t','থ':'th','দ':'d','ধ':'dh','ন':'n','প':'p','ফ':'f','ব':'b','ভ':'bh','ম':'m','য':'y','র':'r','ল':'l','শ':'sh','ষ':'sh','স':'s','হ':'h','ড়':'r','ঢ়':'rh','য়':'y','ৎ':'t','ং':'ng','ঃ':'h','ঁ':'n','া':'a','ি':'i','ী':'ee','ু':'u','ূ':'u','ে':'e','ৈ':'oi','ো':'o','ৌ':'ou','্':''};

        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn' + mode.charAt(0).toUpperCase() + mode.slice(1)).classList.add('active');
            
            const categorySelect = document.getElementById('langCategory');
            const statusLabel = document.getElementById('statusLabel');

            // Translate অথবা Dictionary মোডে ক্যাটাগরি দেখাবে
            if(mode === 'translate' || mode === 'dictionary') {
                categorySelect.style.display = 'block';
                statusLabel.innerText = mode === 'translate' ? "Translation Result" : "Dictionary Meaning";
            } else {
                categorySelect.style.display = 'none';
                statusLabel.innerText = "Phonetic Output";
            }
            process();
        }

        async function process() {
            const input = document.getElementById('userInput').value.trim();
            const output = document.getElementById('outputBox');
            if (!input) { output.innerText = "..."; return; }

            if (currentMode === 'phonetic') {
                if (/[\u0980-\u09FF]/.test(input)) {
                    let res = ""; for (let char of input) { res += bnToEnMap[char] || char; }
                    output.innerText = res;
                } else {
                    fetchPhonetic(input);
                }
            } else {
                // Translate এবং Dictionary মোডে ক্যাটাগরি অনুযায়ী কাজ করবে
                const cat = document.getElementById('langCategory').value;
                const target = cat === 'en-bn' ? 'bn' : 'en';
                fetchTranslation(input, target);
            }
        }

        async function fetchPhonetic(text) {
            try {
                const url = `https://inputtools.google.com/request?text=${text}&itc=bn-t-i0-und&num=1&cp=0&cs=1&ie=utf-8&oe=utf-8&app=demopage`;
                const res = await fetch(url);
                const data = await res.json();
                document.getElementById('outputBox').innerText = data[1][0][1][0];
            } catch (e) { document.getElementById('outputBox').innerText = "Error..."; }
        }

        async function fetchTranslation(text, target) {
            try {
                const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${target}&dt=t&q=${encodeURI(text)}`;
                const res = await fetch(url);
                const data = await res.json();
                document.getElementById('outputBox').innerText = data[0][0][0];
            } catch (e) { document.getElementById('outputBox').innerText = "Translation error..."; }
        }

        function copyResult() {
            const text = document.getElementById('outputBox').innerText;
            if (text === "...") return;
            navigator.clipboard.writeText(text);
            const btn = event.target;
            btn.innerText = "COPIED!";
            setTimeout(() => { btn.innerText = "COPY"; }, 1500);
        }
    </script>
</body>
</html>
